"use strict";(self.webpackChunkWaldorfshop7=self.webpackChunkWaldorfshop7||[]).push([[566],{5566:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("form",{staticClass:"reset-pwd-container login-pwd-reset",attrs:{id:"reset-pwd-form-"+t._uid,method:"post"}},[e("div",{ref:"pwdModal",staticClass:"modal fade",attrs:{id:"resetPwd",tabindex:"-1",role:"dialog"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("div",{staticClass:"modal-title h3"},[t._v(t._s(t.$translate("Ceres::Template.loginForgotPassword")))]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true","aria-label":t.$translate("Ceres::Template.closeIcon")}},[t._v("Ã—")])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"alert alert-info w-100 pwd-forgot-info"},[e("span",{staticClass:"info-badge"},[t._v(t._s(t.$translate("Ceres::Template.loginForgotPasswordInfo")))])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.honeypot,expression:"honeypot"}],staticClass:"honey",attrs:{type:"text",name:"username",autocomplete:"new-password",tabindex:"-1"},domProps:{value:t.honeypot},on:{input:function(e){e.target.composing||(t.honeypot=e.target.value)}}}),t._v(" "),e("div",{staticClass:"input-unit no-bottom",attrs:{"data-validate":"mail"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"email",name:"email",autocomplete:"email",id:"mail"+t._uid,"data-autofocus":""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),e("label",{attrs:{for:"mail"+t._uid}},[t._v(t._s(t.$translate("Ceres::Template.loginEmail"))+"*")])]),t._v(" "),e("span",{staticClass:"error-msg"},[t._v(t._s(t.$translate("Ceres::Template.loginEnterConfirmEmail")))])])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("div",[t._t("extend-overlay-buttons"),t._v(" "),t.currentTemplate&&"tpl.login"!=t.currentTemplate?e("button",{staticClass:"btn btn-danger btn-medium mr-2",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.cancelResetPwd.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-arrow-left",attrs:{"aria-hidden":"true"}}),t._v("\n                                "+t._s(t.$translate("Ceres::Template.loginBackToLogin"))+"\n                            ")]):t._e(),t._v(" "),e("button",{staticClass:"btn btn-primary btn-medium",attrs:{disabled:t.isDisabled},on:{click:function(e){return e.preventDefault(),t.validateResetPwd.apply(null,arguments)}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$translate("Ceres::Template.loginSend"))+"\n\t\t\t\t\t\t\t\t"),e("icon",{attrs:{icon:"paper-plane-o",loading:t.isDisabled}})],1)],2)])])])])])};s._withStripped=!0,a(7495),a(5746);var l=a(8115),o=a(7472),i=a(2280),r=a(8520),n=a(1565),d=a(1900),m={name:"forgot-password-modal",props:{currentTemplate:String},data(){return{username:"",isDisabled:!1,honeypot:""}},mounted(){this.$nextTick((()=>{$(this.$refs.pwdModal).on("hidden.bs.modal",(()=>{this.username=""}));const t=n.Ay.getUrlParams(document.location.search);(0,d.hX)(t.show)||"forgotPassword"!==t.show||(i.default.findModal(this.$refs.pwdModal).show(),this.username=(0,d.hX)(t.email)?"":t.email)}))},watch:{username(t,e){this.resetError()}},methods:{validateResetPwd(){r.Ay.validate(this.$refs.pwdModal).done((()=>{this.sendResetPwd()})).fail((t=>{r.Ay.markInvalidFields(t,"error")}))},sendResetPwd(){this.isDisabled=!0,l.default.post("/rest/io/customer/password_reset",{email:this.username,honeypot:this.honeypot}).done((()=>{i.default.findModal(this.$refs.pwdModal).hide(),this.isDisabled=!1,o.default.success(this.$translate("Ceres::Template.loginSendEmailOk")).closeAfter(5e3)})).fail((()=>{this.isDisabled=!1,o.default.error(this.$translate("Ceres::Template.loginResetPwDErrorOnSendEmail")).closeAfter(5e3)}))},cancelResetPwd(){this.resetError(),i.default.findModal(this.$refs.pwdModal).hide().then((()=>{i.default.findModal(document.getElementById("login")).show()}))},resetError(){r.Ay.unmarkAllFields(this.$refs.pwdModal)}}},u=(0,a(4486).A)(m,s,[],!1,null,null,null).exports}}]);
//# sourceMappingURL=ceres-client-566.min.js.map