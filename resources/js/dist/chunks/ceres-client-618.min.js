"use strict";(self.webpackChunkWaldorfshop7=self.webpackChunkWaldorfshop7||[]).push([[618],{2618:function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("div",[e.currentOffer?t("category-item",{attrs:{"item-data":e.currentOffer.item,"decimal-count":e.$ceres.config.item.storeSpecial,"image-url-accessor":"urlMiddle","padding-classes":e.paddingClasses,"padding-inline-styles":e.paddingInlineStyles,"force-url-with-variation-id":!0},scopedSlots:e._u([{key:"store-special",fn:function(){return[e.storeSpecial?t("item-store-special",{attrs:{"store-special":e.storeSpecial,"recommended-retail-price":e.prices.rrp,"variation-retail-price":e.prices.price,"decimal-count":e.$ceres.config.item.storeSpecial}}):e._e()]},proxy:!0},{key:"item-image",fn:function(){return[e.displaySettings.customImagePath?t("a",{attrs:{href:e._f("itemURL")(e.currentOffer.item)}},[t("lazy-img",{attrs:{"image-url":e.displaySettings.customImagePath,alt:e._f("itemName")(e.currentOffer.item),title:e._f("itemName")(e.currentOffer.item)}})],1):e._e()]},proxy:!0},e.currentOffer&&1!==e.whenIsCurrentOffer()&&e.isActiveByStock?{key:"item-details",fn:function(){return[t("live-shopping-details",{attrs:{"live-shopping-data":e.currentOffer,"display-settings":e.displaySettings,prices:e.prices,"is-active-by-stock":e.isActiveByStock,"show-net-prices":e.showNetPrices},on:{"reload-offer":function(t){return e.reloadOffer()}},scopedSlots:e._u([{key:"after-item-name",fn:function(){return[t("div",{staticClass:"live-shopping-add-to-basket"},[t("add-to-basket",{attrs:{"variation-id":e.currentOffer.item.variation.id,"is-salable":!!e.currentOffer.item.filter&&e.currentOffer.item.filter.isSalable,"has-children":!!e.currentOffer.item.filter&&e.currentOffer.item.filter.hasActiveChildren,"interval-quantity":e.currentOffer.item.variation.intervalOrderQuantity||1,"minimum-quantity":e.currentOffer.item.variation.minimumOrderQuantity,"maximum-quantity":e.currentOffer.item.variation.maximumOrderQuantity&&e.currentOffer.item.variation.maximumOrderQuantity>0?e.currentOffer.item.variation.maximumOrderQuantity:null,"order-properties":e.currentOffer.item.properties.filter((function(e){return e.property.isOderProperty})),"has-order-properties":e.currentOffer.item.hasOrderProperties,"has-required-order-property":e.currentOffer.hasRequiredOrderProperty,"use-large-scale":!1,"show-quantity":!1,"item-url":e._f("itemURL")(e.currentOffer.item),"item-type":e.currentOffer.item.item.itemType}})],1)]},proxy:!0}],null,!1,883888925)})]},proxy:!0}:null],null,!0)}):t("div",[e._t("default")],2)],1)};s._withStripped=!0,i(8940);var r=i(1900),a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"live-shopping-details"},[t("div",{staticClass:"h3 live-shopping-item-name"},[t("a",{attrs:{href:e._f("itemURL")(e.liveShoppingData.item)}},[e._v("\n            "+e._s(e._f("itemName")(e.liveShoppingData.item))+"\n        ")])]),e._v(" "),e._t("after-item-name"),e._v(" "),e.displaySettings.showTimer||e.displaySettings.showStock?t("div",{staticClass:"live-shopping-countdown"},[t("hr",{staticClass:"live-shopping-countdown-separator"}),e._v(" "),e.displaySettings.showTimer?t("div",{staticClass:"live-shopping-countdown-heading"},[e.hasStarted?t("div",[e._v("\n                "+e._s(e.$translate("Ceres::Template.liveShoppingOfferEndsIn"))+"\n            ")]):t("div",[e._v("\n                "+e._s(e.$translate("Ceres::Template.liveShoppingOfferBeginsIn"))+"\n            ")])]):e._e(),e._v(" "),e.displaySettings.showTimer&&e.duration?t("div",{staticClass:"live-shopping-countdown-thread-container"},[e.duration.days>0?t("div",{staticClass:"live-shopping-countdown-thread"},[t("div",{staticClass:"live-shopping-countdown-thread-number"},[e._v(e._s(e.duration.days))]),e._v(" "),t("div",{staticClass:"small"},[e._v(e._s(e.$translate("Ceres::Template.liveShoppingDays")))])]):e._e(),e._v(" "),t("div",{staticClass:"live-shopping-countdown-thread"},[t("div",{staticClass:"live-shopping-countdown-thread-number"},[e._v(e._s(e.duration.hours))]),e._v(" "),t("div",{staticClass:"small"},[e._v(e._s(e.$translate("Ceres::Template.liveShoppingHours")))])]),e._v(" "),t("div",{staticClass:"live-shopping-countdown-thread"},[t("div",{staticClass:"live-shopping-countdown-thread-number"},[e._v(e._s(e.duration.minutes))]),e._v(" "),t("div",{staticClass:"small"},[e._v(e._s(e.$translate("Ceres::Template.liveShoppingMinutes")))])]),e._v(" "),e.duration.days<=0?t("div",{staticClass:"live-shopping-countdown-thread"},[t("div",{staticClass:"live-shopping-countdown-thread-number"},[e._v(e._s(e.duration.seconds))]),e._v(" "),t("div",{staticClass:"small"},[e._v(e._s(e.$translate("Ceres::Template.liveShoppingSeconds")))])]):e._e()]):e._e(),e._v(" "),e.hasStarted&&!e.hasClosed?[e.displaySettings.showTimer&&e.displaySettings.showTimerProgress?t("div",{staticClass:"live-shopping-progress"},[t("div",{staticClass:"progress"},[t("div",{staticClass:"progress-bar",class:"progress-"+10*Math.round(e.timePercentage/10),style:"width:"+e.timePercentage+"%",attrs:{role:"progressbar","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"}})])]):e._e(),e._v(" "),e.displaySettings.showStock?t("div",{staticClass:"live-shopping-progress"},[t("div",{staticClass:"live-shopping-progress-heading"},[t("span",[e._v(e._s(e.$translate("Ceres::Template.liveShoppingRemainingStock",{quantityRemaining:e.itemQuantityRemaining,quantityMax:e.liveShoppingData.liveShopping.quantityMax})))])]),e._v(" "),e.displaySettings.showStockProgress?t("div",{staticClass:"progress"},[t("div",{staticClass:"progress-bar",class:"progress-"+10*Math.round(e.quantitySoldPercentage/10),style:"width:"+e.quantitySoldPercentage+"%",attrs:{role:"progressbar","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"}})]):e._e()]):e._e()]:e._e()],2):e._e(),e._v(" "),e.hasStarted&&!e.hasClosed?t("div",{staticClass:"live-shopping-prices bg-danger"},[t("div",{staticClass:"live-shopping-prices-inner"},[!isNaN(e.itemPriceRebatePercentage)&&e.itemPriceRebatePercentage>0?t("div",{staticClass:"live-shopping-prices-rebate"},[e._v(e._s(e.$translate("Ceres::Template.liveShoppingRebate",{rebate:e.itemPriceRebatePercentage})))]):e._e(),e._v(" "),t("div",{staticClass:"live-shopping-prices-container"},[t("div",{staticClass:"live-shopping-price"},[t("strong",[e._v(e._s(e.prices.price.unitPrice.formatted)+" *")])]),e._v(" "),e.isCrossPriceVisible?t("span",[e.prices.isRrpDefaultPrice?t("span",{domProps:{innerHTML:e._s(e.oldPriceBefore)}}):t("span",{domProps:{innerHTML:e._s(e.oldPriceRrp)}})]):e._e()])]),e._v(" "),t("div",{staticClass:"live-shopping-prices-additional-info"},[e.isCrossPriceVisible&&e.liveShoppingData.item.prices.default.lowestPrice.value?t("div",{staticClass:"live-shopping-lowest-price"},[t("span",{domProps:{innerHTML:e._s(e.$translate("Ceres::Template.singleItemLowestPrice",{price:e.liveShoppingData.item.prices.default.lowestPrice.formatted}))}})]):e._e(),e._v(" "),"C62"!==e.liveShoppingData.item.unit.unitOfMeasurement||1!==e.liveShoppingData.item.unit.content?t("div",{staticClass:"live-shopping-unit-price"},[t("span",[e._v(e._s(e.liveShoppingData.item.unit.content))]),e._v(" "),t("span",[e._v(e._s(e.liveShoppingData.item.unit.names.name))]),e._v(" "),e.liveShoppingData.item.variation.mayShowUnitPrice?t("span",[e._v("| "+e._s(e.prices.price.basePrice))]):e._e()]):e._e(),e._v("\n\n            "+e._s(e.$translate("Ceres::Template.liveShoppingFootnote"))+" "),e.showNetPrices?[e._v(e._s(e.$translate("Ceres::Template.itemExclVAT")))]:[e._v(e._s(e.$translate("Ceres::Template.itemInclVAT")))],e._v(" "+e._s(e.$translate("Ceres::Template.itemExclusive"))+"\n            "),e.$ceres.config.global.shippingCostsCategoryId>0?t("a",{attrs:{"data-toggle":"modal",href:"#shippingscosts",title:e.$translate("Ceres::Template.itemShippingCosts")}},[e._v(e._s(e.$translate("Ceres::Template.itemShippingCosts")))]):t("a",{attrs:{title:e.$translate("Ceres::Template.itemShippingCosts")}},[e._v(e._s(e.$translate("Ceres::Template.itemShippingCosts")))])],2)]):t("div",{staticClass:"thumb-content"},[t("div",[t("div",{staticClass:"prices"},[t("div",{staticClass:"price-view-port"},[e.isCrossPriceVisible?t("del",{staticClass:"crossprice"},[e._v("\n                        "+e._s(e._f("itemCrossPrice")(e.prices.rrp.price.formatted))+"\n                    ")]):e._e()]),e._v(" "),t("div",{staticClass:"price"},[e._v("\n                    "+e._s(e.prices.price.price.formatted)+" *\n                ")])]),e._v(" "),e.isCrossPriceVisible&&e.liveShoppingData.item.prices.default.lowestPrice.value?t("div",{staticClass:"category-lowest-price small"},[t("span",{domProps:{innerHTML:e._s(e.$translate("Ceres::Template.singleItemLowestPrice",{price:e.liveShoppingData.item.prices.default.lowestPrice.formatted}))}})]):e._e(),e._v(" "),"C62"!==e.liveShoppingData.item.unit.unitOfMeasurement||1!==e.liveShoppingData.item.unit.content?t("div",{staticClass:"category-unit-price small"},[t("span",[e._v(e._s(e.liveShoppingData.item.unit.content))]),e._v(" "),t("span",[e._v(e._s(e.liveShoppingData.item.unit.names.name))]),e._v(" "),e.liveShoppingData.item.variation.mayShowUnitPrice?t("span",[e._v("| "+e._s(e.prices.price.basePrice))]):e._e()]):e._e(),e._v(" "),t("span",{staticClass:"vat small text-muted"},[e._v("\n                "+e._s(e.$translate("Ceres::Template.liveShoppingFootnote"))+" "),e.showNetPrices?[e._v(e._s(e.$translate("Ceres::Template.itemExclVAT")))]:[e._v(e._s(e.$translate("Ceres::Template.itemInclVAT")))],e._v(" "+e._s(e.$translate("Ceres::Template.itemExclusive"))+"\n                "),e.$ceres.config.global.shippingCostsCategoryId>0?t("a",{attrs:{"data-toggle":"modal",href:"#shippingscosts",title:e.$translate("Ceres::Template.itemShippingCosts")}},[e._v(e._s(e.$translate("Ceres::Template.itemShippingCosts")))]):t("a",{attrs:{title:e.$translate("Ceres::Template.itemShippingCosts")}},[e._v(e._s(e.$translate("Ceres::Template.itemShippingCosts")))])],2)])])],2)};a._withStripped=!0,i(9868),i(7495),i(5440);var n=i(4353),l=i.n(n),o={props:{liveShoppingData:{type:Object,required:!0},displaySettings:{type:Object,default:()=>({showCrossPrice:!0,showStock:!0,showStockProgress:!0,showTimer:!0,showTimerProgress:!0})},prices:{type:Object,required:!0},isActiveByStock:{type:Boolean},showNetPrices:{type:Boolean}},data(){return{currentInterval:null,duration:null,hasClosed:null,hasStarted:null,itemPriceRebatePercentage:0,itemQuantityRemaining:0,momentBegin:null,momentEnd:null,quantitySoldPercentage:0,timePercentage:0}},computed:{oldPriceBefore(){return this.$translate("Ceres::Template.liveShoppingBefore",{price:"<del>"+this.prices.rrp.unitPrice.formatted+"</del>"})},oldPriceRrp(){return this.$translate("Ceres::Template.liveShoppingRrp",{price:"<del>"+this.prices.rrp.unitPrice.formatted+"</del>"})},isCrossPriceVisible(){return this.displaySettings.showCrossPrice&&this.prices.rrp&&this.prices.rrp.unitPrice.value>0}},created(){this.initializeDataAndTimer()},methods:{initializeDataAndTimer(){const e=l()();this.momentBegin=l().unix(this.liveShoppingData.liveShopping.fromTime),this.momentEnd=l().unix(this.liveShoppingData.liveShopping.toTime),this.hasStarted=this.momentBegin.valueOf()<e.valueOf(),this.hasClosed=this.momentEnd.valueOf()<e.valueOf(),this.setQuantitySoldPercentage(),this.hasStarted&&!this.hasClosed&&this.setItemPriceRebatePercentage(),clearInterval(this.currentInterval),this.calculations(),this.currentInterval=setInterval((()=>{this.calculations()}),1e3)},setQuantitySoldPercentage(){const e=this.liveShoppingData.liveShopping,t=100-e.quantitySold/e.quantityMax*100;this.itemQuantityRemaining=e.quantityMax-e.quantitySold,this.quantitySoldPercentage=t.toFixed(App.config.item.storeSpecial)},setItemPriceRebatePercentage(){const e=this.prices.price.price.value,t=this.prices.rrp&&this.prices.rrp.price.value||0;if(0===t)this.itemPriceRebatePercentage=0;else{let i=100-e/t*100;i=i.toFixed(App.config.item.storeSpecial),i=i.replace(".",App.decimalSeparator),this.itemPriceRebatePercentage=i}},calculations(){const e=l()();let t=0,i=0;t=this.momentEnd.diff(this.momentBegin,"second"),i=this.hasStarted?this.momentEnd.diff(e,"second"):this.momentBegin.diff(e,"second"),this.timePercentage=(i/t*100).toFixed(App.config.item.storeSpecial),this.duration=this.getDuration(i);const s=!this.hasStarted&&this.momentBegin<e,r=!this.hasClosed&&this.momentEnd<e;(s||r)&&(clearInterval(this.currentInterval),this.$emit("reload-offer"))},getDuration(e){const t=Math.floor(e/86400);e-=60*t*60*24;const i=Math.floor(e/3600);e-=60*i*60;const s=Math.floor(e/60);return{days:t,hours:i,minutes:s,seconds:e-=60*s}}},watch:{liveShoppingData(){this.initializeDataAndTimer()}}},p=i(4486),c=(0,p.A)(o,a,[],!1,null,null,null).exports,d=i(17);const m=Object.freeze({past:1,now:2,future:3});var h={components:{LiveShoppingDetails:c,ItemStoreSpecial:d.A},props:{liveShoppingId:{type:Number,required:!0,validator:e=>e%1==0&&e>=1&&e<=10},displaySettings:{type:Object},paddingClasses:{type:String,default:null},paddingInlineStyles:{type:String,default:null},sorting:{type:String,default:null},showNetPrices:{type:Boolean}},computed:{currentOffer(){return this.$store.state.liveShopping.liveShoppingOffers[this._uid]},isActive(){return this.isActiveByTime&&this.isActiveByStock},isActiveByTime(){if(!(0,r.hX)(this.currentOffer)){const e=1e3*parseInt(this.currentOffer.liveShopping.fromTime),t=1e3*parseInt(this.currentOffer.liveShopping.toTime),i=Date.now();return e<i&&i<t}return!1},isActiveByStock(){if(!(0,r.hX)(this.currentOffer)){const e=this.currentOffer.liveShopping;return e.quantitySold<e.quantityMax}return!1},storeSpecial(){if(!(0,r.hX)(this.currentOffer)){if(this.isActive)return{id:1};const e=this.whenIsCurrentOffer();let t="";return e===m.past?t=this.$translate("Ceres::Template.liveShoppingOfferClosed"):e===m.future?t=this.$translate("Ceres::Template.liveShoppingNextOffer"):e===m.now&&(t=this.$translate("Ceres::Template.liveShoppingOfferSoldOut")),{id:-1,names:{name:t}}}return null},prices(){const e=this.currentOffer.item.prices,t={price:e.default,rrp:e.rrp,isRrpDefaultPrice:!1};return(0,r.hX)(e.specialOffer)||(t.price=e.specialOffer,t.rrp=e.default||e.rrp,t.isRrpDefaultPrice=!!e.default),t}},mounted(){this.reloadOffer()},methods:{whenIsCurrentOffer(){const e=1e3*parseInt(this.currentOffer.liveShopping.fromTime),t=1e3*parseInt(this.currentOffer.liveShopping.toTime),i=Date.now();return e<i&&i>t?m.past:e<i&&i<t?m.now:m.future},reloadOffer(){this.$store.dispatch("retrieveLiveShoppingOffer",{liveShoppingId:this.liveShoppingId,sorting:this.sorting,uid:this._uid})}}},u=(0,p.A)(h,s,[],!1,null,null,null).exports}}]);
//# sourceMappingURL=ceres-client-618.min.js.map